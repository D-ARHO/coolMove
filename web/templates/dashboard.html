{% extends "base.html" %}

{% block title %}Dashboard | {{ user.name }}{% endblock %}

{% block content %}
<h1 class="mb-4">Welcome to your Dashboard, {{ user.name }}!</h1>

<p class="lead">This is your secure, private area to monitor your CoolMove devices.</p>

<hr>

<div class="row">
    <div class="col-12">
        <h2 class="h4">Your Registered Devices ({{ devices|length }})</h2>
        <a href="{{ url_for('add_device') }}" class="btn btn-sm btn-info mb-3">Add New Device</a>

        {% if devices %}
        <ul class="list-group">
            {% for device in devices %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>{{ device.device_name }}</strong> 
                <span class="badge bg-secondary me-3">IMEI: {{ device.unique_imei }}</span>
                <span class="text-muted">Status: Awaiting Latest Reading... (Feature coming soon)</span>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="alert alert-warning">
            You don't have any devices registered yet. Click the button above to add one!
        </div>
        {% endif %}
    </div>
</div>

<hr>

<div class="mt-5">
    <h2 class="h4">Live Tracking Map (Under Development)</h2>
    <div style="height: 400px; background-color: #f8f9fa; border: 1px solid #dee2e6; display: flex; align-items: center; justify-content: center; color: #6c757d;">
        [Map Integration Area: This will be replaced by Leaflet/Google Maps and WebSockets for real-time data]
    </div>
</div>

{% endblock %}